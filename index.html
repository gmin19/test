<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <!-- 검색 엔진 수집 차단 (Google, Naver 등) -->
    <meta name="robots" content="noindex, nofollow">
    <meta name="googlebot" content="noindex">
    
    <title>KABELSCHLEPP Drag Chain 체크리스트</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap');
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: #f3f4f6;
            color: #1f2937;
            /* 모바일에서 탭 하이라이트 색상 변경 */
            -webkit-tap-highlight-color: transparent;
        }
        .section-header {
            border-bottom: 2px solid #dc2626; /* Kabelschlepp Red style */
            padding-bottom: 0.5rem;
            margin-bottom: 1.5rem;
        }
        .input-group {
            margin-bottom: 1.25rem;
        }
        .info-box {
            background-color: #f9fafb;
            border-left: 4px solid #9ca3af;
            padding: 0.75rem;
            margin-top: 0.5rem;
            font-size: 0.875rem;
            color: #4b5563;
            line-height: 1.4;
        }
        .math-symbol {
            font-family: 'Times New Roman', serif;
            font-style: italic;
            font-weight: bold;
        }
        /* 입력 필드 기본 스타일 (모바일 최적화: 16px 이상이어야 iOS 자동 확대 방지) */
        input, select, textarea {
            font-size: 16px !important; 
        }
        
        /* 숫자 입력기 화살표 숨김 */
        input[type=number]::-webkit-inner-spin-button, 
        input[type=number]::-webkit-outer-spin-button { 
            -webkit-appearance: none; 
            margin: 0; 
        }
        
        /* 라디오/체크박스 크기 키움 */
        input[type=radio], input[type=checkbox] {
            transform: scale(1.2);
            margin-right: 0.5rem;
        }
        /* 썸네일 이미지 스타일 */
        .thumb-icon {
            height: 2rem; /* h-8 equivalent */
            width: auto;
            border: 1px solid #d1d5db;
            border-radius: 0.25rem;
            cursor: pointer;
            transition: opacity 0.2s;
            margin-left: 0.5rem;
            background-color: white;
            padding: 2px;
        }
        .thumb-icon:hover {
            opacity: 0.8;
            border-color: #dc2626;
        }
        /* 크로스바 썸네일은 조금 더 크게 */
        .stay-thumb {
            height: 3rem; 
            margin-left: 0.75rem;
        }
        
        /* 아이폰 하단 안전 영역 대응 */
        .safe-area-bottom {
            padding-bottom: constant(safe-area-inset-bottom); /* iOS 11.0 */
            padding-bottom: env(safe-area-inset-bottom); /* iOS 11.2+ */
        }

        /* [인쇄 최적화 스타일] PDF 저장 및 인쇄 시 적용 */
        @media print {
            @page {
                size: A4;
                margin: 10mm 15mm; /* 상하 10mm, 좌우 15mm 여백 */
            }
            body {
                background-color: white;
                font-size: 10pt; /* 폰트 사이즈 축소 */
                color: black;
                line-height: 1.3;
            }
            .max-w-4xl {
                width: 100% !important;
                max-width: none !important;
                margin: 0 !important;
                padding: 0 !important;
                box-shadow: none !important;
            }
            /* 인쇄 시 숨길 요소들 */
            .no-print, .thumb-icon, .info-box, button, #toast, .fixed, .sticky {
                display: none !important;
            }
            /* 섹션 간격 줄임 */
            form {
                padding: 0 !important;
                margin: 0 !important;
            }
            section {
                margin-bottom: 1rem !important; /* 섹션 간격 축소 */
                page-break-inside: avoid; /* 섹션 중간에 페이지 끊김 방지 */
                padding-bottom: 0 !important;
            }
            .space-y-8 > :not([hidden]) ~ :not([hidden]) {
                margin-top: 1rem !important; /* Tailwind space-y 축소 */
            }
            .section-header {
                margin-bottom: 0.5rem !important;
                padding-bottom: 0.25rem !important;
                border-bottom: 1px solid #dc2626 !important; /* 테두리 얇게 */
                font-size: 12pt !important;
            }
            /* 그리드 레이아웃 강제 (2열 유지) */
            .grid {
                display: grid !important;
                grid-template-columns: repeat(2, minmax(0, 1fr)) !important;
                gap: 0.75rem !important;
            }
            .col-span-2, .md\:col-span-2 {
                grid-column: span 2 / span 2 !important;
            }
            /* 입력 그룹 간격 축소 */
            .input-group {
                margin-bottom: 0.5rem !important;
                page-break-inside: avoid;
            }
            /* 라벨 폰트 축소 */
            label {
                font-size: 9pt !important;
                margin-bottom: 0.1rem !important;
            }
            /* 입력창 스타일 간소화 (잉크 절약) */
            input[type="text"], input[type="number"], input[type="date"], textarea, select {
                border: 1px solid #999 !important;
                background-color: transparent !important;
                border-radius: 4px !important;
                padding: 2px 4px !important;
                font-size: 10pt !important;
                height: auto !important;
                box-shadow: none !important;
                min-height: 0 !important;
            }
            textarea {
                resize: none;
                height: 4rem !important; /* 메모장 높이 고정 */
            }
            /* 배경색 제거 */
            .bg-gray-50, .bg-white {
                background-color: transparent !important;
                border: none !important;
            }
            /* 체크박스/라디오 그룹 정렬 */
            .flex-col {
                flex-direction: row !important; /* 세로 배열을 가로로 변경하여 공간 절약 */
                flex-wrap: wrap;
            }
            .flex-col > * {
                margin-right: 1rem;
                margin-bottom: 0.25rem;
            }
            /* 로고 등 헤더 처리 */
            .print-header {
                display: block !important;
                text-align: center;
                margin-bottom: 1rem;
                border-bottom: 2px solid #333;
                padding-bottom: 0.5rem;
            }
            .print-header h1 {
                font-size: 16pt;
                font-weight: bold;
            }
        }
    </style>
</head>
<body class="bg-gray-100">

    <div class="max-w-4xl mx-auto bg-white shadow-lg min-h-screen md:min-h-0 md:rounded-lg md:my-8 overflow-hidden flex flex-col relative">
        <!-- Header -->
        <div class="bg-gray-800 text-white p-4 md:p-6 sticky top-0 z-20 shadow-md no-print flex justify-between items-center">
            <div>
                <h1 class="text-lg md:text-3xl font-bold mb-1">KABELSCHLEPP 체크리스트</h1>
                <p class="text-gray-400 text-xs md:text-sm">현장 확인용 모바일 최적화 양식</p>
            </div>
            <!-- Top Action Button (Reset) for easy access -->
            <button onclick="resetForm()" class="text-gray-300 hover:text-white p-2">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
                </svg>
            </button>
        </div>
        
        <!-- Print Only Header -->
        <div class="hidden print:block print-header">
            <h1>KABELSCHLEPP Drag Chain 현장 체크리스트</h1>
            <p style="font-size: 10pt; color: #555;">작성일: <span id="printDate"></span></p>
        </div>

        <!-- Form Container -->
        <form id="checklistForm" class="p-4 md:p-8 space-y-8 flex-grow">
            
            <!-- 1. 기본 정보 -->
            <section>
                <h2 class="text-lg md:text-xl font-bold text-gray-800 section-header">1. 기본 정보</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6">
                    <div class="input-group">
                        <label class="block text-sm font-medium text-gray-700 mb-1">점검 일자</label>
                        <input type="date" id="checkDate" class="w-full border-gray-300 border rounded-lg p-3 focus:ring-2 focus:ring-red-500 focus:border-red-500 outline-none shadow-sm transition-all bg-gray-50">
                    </div>
                    <div class="input-group">
                        <label class="block text-sm font-medium text-gray-700 mb-1">설비명 / 라인명</label>
                        <input type="text" id="machineName" class="w-full border-gray-300 border rounded-lg p-3 focus:ring-2 focus:ring-red-500 focus:border-red-500 outline-none shadow-sm transition-all" placeholder="예: 가공센터 3호기">
                    </div>
                    <div class="input-group">
                        <label class="block text-sm font-medium text-gray-700 mb-1">담당자</label>
                        <input type="text" id="inspector" class="w-full border-gray-300 border rounded-lg p-3 focus:ring-2 focus:ring-red-500 focus:border-red-500 outline-none shadow-sm transition-all">
                    </div>
                </div>
            </section>

            <!-- 2. 치수 및 외형 정보 -->
            <section>
                <h2 class="text-lg md:text-xl font-bold text-gray-800 section-header">2. 치수 및 외형 정보</h2>
                <p class="mb-4 text-sm text-gray-600 no-print">아이콘을 터치하면 상세 도면을 확대할 수 있습니다.</p>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6">
                    <!-- 내폭 (Inner Width) -->
                    <div class="input-group">
                        <div class="flex items-center mb-1 justify-between">
                            <label class="text-sm font-medium text-gray-700">내폭 (<span class="math-symbol">Bi</span>) (mm)</label>
                            <img src="https://tsubaki-kabelschlepp.com/typo3conf/ext/tkg17/Resources/Public/Images/Pictographs/picto_Inner-width.svg" class="thumb-icon" onclick="event.preventDefault(); openImageModal(this.src)" title="도면 보기">
                        </div>
                        <input type="number" inputmode="decimal" id="bi" class="w-full border-gray-300 border rounded-lg p-3 focus:ring-2 focus:ring-red-500 focus:border-red-500 outline-none shadow-sm transition-all" placeholder="숫자만 입력">
                        <div class="info-box no-print text-xs">
                            케이블이 놓일 <strong>실제 내부 너비</strong>입니다.
                        </div>
                    </div>

                    <!-- 외폭 (Outer Width) -->
                    <div class="input-group">
                        <div class="flex items-center mb-1 justify-between">
                            <label class="text-sm font-medium text-gray-700">외폭 (<span class="math-symbol">Ba</span>) (mm)</label>
                            <img src="https://tsubaki-kabelschlepp.com/typo3conf/ext/tkg17/Resources/Public/Images/Pictographs/picto_Outer-width.svg" class="thumb-icon" onclick="event.preventDefault(); openImageModal(this.src)" title="도면 보기">
                        </div>
                        <input type="number" inputmode="decimal" id="ba" class="w-full border-gray-300 border rounded-lg p-3 focus:ring-2 focus:ring-red-500 focus:border-red-500 outline-none shadow-sm transition-all">
                    </div>

                    <!-- 내측 높이 (Inner Height) -->
                    <div class="input-group">
                        <div class="flex items-center mb-1 justify-between">
                            <label class="text-sm font-medium text-gray-700">내측 높이 (<span class="math-symbol">hi</span>) (mm)</label>
                            <img src="https://tsubaki-kabelschlepp.com/typo3conf/ext/tkg17/Resources/Public/Images/Pictographs/picto_Inner-height.svg" class="thumb-icon" onclick="event.preventDefault(); openImageModal(this.src)" title="도면 보기">
                        </div>
                        <input type="number" inputmode="decimal" id="hi" class="w-full border-gray-300 border rounded-lg p-3 focus:ring-2 focus:ring-red-500 focus:border-red-500 outline-none shadow-sm transition-all">
                    </div>

                    <!-- 외측 높이 (Outer Height) -->
                    <div class="input-group">
                        <div class="flex items-center mb-1 justify-between">
                            <label class="text-sm font-medium text-gray-700">외측 높이 (<span class="math-symbol">ha</span>) (mm)</label>
                            <img src="https://tsubaki-kabelschlepp.com/typo3conf/ext/tkg17/Resources/Public/Images/Pictographs/picto_Outer-height.svg" class="thumb-icon" onclick="event.preventDefault(); openImageModal(this.src)" title="도면 보기">
                        </div>
                        <input type="number" inputmode="decimal" id="ha" class="w-full border-gray-300 border rounded-lg p-3 focus:ring-2 focus:ring-red-500 focus:border-red-500 outline-none shadow-sm transition-all">
                    </div>

                    <!-- 곡률 반경 (Bending Radius) -->
                    <div class="input-group">
                        <div class="flex items-center mb-1 justify-between">
                            <label class="text-sm font-medium text-gray-700">곡률 반경 (<span class="math-symbol">KR</span>) (mm)</label>
                            <img src="https://tsubaki-kabelschlepp.com/typo3conf/ext/tkg17/Resources/Public/Images/Pictographs/picto_bending-radius.svg" class="thumb-icon" onclick="event.preventDefault(); openImageModal(this.src)" title="도면 보기">
                        </div>
                        <input type="number" inputmode="decimal" id="kr" class="w-full border-gray-300 border rounded-lg p-3 focus:ring-2 focus:ring-red-500 focus:border-red-500 outline-none shadow-sm transition-all">
                        <div class="info-box no-print text-xs">
                            모를 경우 우측의 <strong>전체 높이(H)</strong>를 측정하세요.
                        </div>
                    </div>

                    <!-- 전체 높이 (H) -->
                    <div class="input-group">
                        <div class="flex items-center mb-1 justify-between">
                            <label class="text-sm font-medium text-gray-700">Drag Chain 전체 높이 (<span class="math-symbol">H</span>) (mm)</label>
                            <img src="https://onlineengineer.de/img/groups_info/group_info_einbaumasse.png" class="thumb-icon" onclick="event.preventDefault(); openImageModal(this.src)" title="도면 보기">
                        </div>
                        <input type="number" inputmode="decimal" id="totalHeight" class="w-full border-gray-300 border rounded-lg p-3 focus:ring-2 focus:ring-red-500 focus:border-red-500 outline-none shadow-sm transition-all">
                        <div class="info-box no-print text-xs">
                            설치 상태에서 바닥부터 최고점까지의 높이입니다. (KR 추산용)
                        </div>
                    </div>

                    <!-- 피치 (Pitch) -->
                    <div class="input-group md:col-span-2">
                        <div class="flex items-center mb-1 justify-between">
                            <label class="text-sm font-medium text-gray-700">피치 (<span class="math-symbol">P</span>) (mm)</label>
                            <img src="https://tsubaki-kabelschlepp.com/typo3conf/ext/tkg17/Resources/Public/Images/Pictographs/picto_pitch.svg" class="thumb-icon" onclick="event.preventDefault(); openImageModal(this.src)" title="도면 보기">
                        </div>
                        <input type="number" inputmode="decimal" id="pitch" class="w-full border-gray-300 border rounded-lg p-3 focus:ring-2 focus:ring-red-500 focus:border-red-500 outline-none shadow-sm transition-all">
                        <div class="info-box no-print text-xs">
                            핀과 핀 사이, 즉 <strong>링크 중심에서 다음 링크 중심간의 거리</strong>입니다.
                        </div>
                    </div>

                    <!-- 크로스바 배열 (Stay Arrangement) -->
                    <div class="input-group md:col-span-2">
                        <label class="block text-sm font-medium text-gray-700 mb-2">크로스바 배열 (Stay Arrangement)</label>
                        <div class="flex flex-col space-y-3 bg-white p-4 rounded-lg border border-gray-200 shadow-sm">
                            <label class="flex items-center cursor-pointer w-full p-2 hover:bg-gray-50 rounded">
                                <input type="radio" name="stayArrangement" value="Fully-stayed (매 링크)" class="text-red-600 focus:ring-red-500 h-6 w-6 flex-shrink-0">
                                <img src="https://tsubaki-kabelschlepp.com/typo3conf/ext/tkg17/Resources/Public/Images/Pictographs/picto_stay-arrangement-every-chain-link.svg" class="thumb-icon h-10 w-auto ml-3 flex-shrink-0" onclick="event.preventDefault(); openImageModal(this.src)" alt="Fully-stayed" title="클릭하여 확대">
                                <span class="ml-3 text-gray-700 text-sm">Fully-stayed (매 링크)</span>
                            </label>
                            <div class="border-t border-gray-100 my-1 no-print"></div>
                            <label class="flex items-center cursor-pointer w-full p-2 hover:bg-gray-50 rounded">
                                <input type="radio" name="stayArrangement" value="Half-stayed (2링크 마다)" class="text-red-600 focus:ring-red-500 h-6 w-6 flex-shrink-0">
                                <img src="https://tsubaki-kabelschlepp.com/typo3conf/ext/tkg17/Resources/Public/Images/Pictographs/picto_stay-arrangement-2nd-chain-link.svg" class="thumb-icon h-10 w-auto ml-3 flex-shrink-0" onclick="event.preventDefault(); openImageModal(this.src)" alt="Half-stayed" title="클릭하여 확대">
                                <span class="ml-3 text-gray-700 text-sm">Half-stayed (2링크 마다)</span>
                            </label>
                        </div>
                        <div class="info-box mt-2 no-print text-xs">
                            <strong>Fully-stayed:</strong> 모든 링크에 크로스바가 장착됨.<br>
                            <strong>Half-stayed:</strong> 2개의 링크마다 하나씩 장착됨 (Standard).
                        </div>
                    </div>
                </div>
            </section>

            <!-- 3. 운전 조건 -->
            <section>
                <h2 class="text-lg md:text-xl font-bold text-gray-800 section-header">3. 운전 조건</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6">
                    <div class="input-group">
                        <div class="flex items-center mb-1 justify-between">
                            <label class="text-sm font-medium text-gray-700">이동 거리 (Stroke, <span class="math-symbol">Ls</span>) (mm)</label>
                            <img src="https://onlineengineer.de/img/bloecke_info/desc_img/lslv_freitragend.jpg" class="thumb-icon" onclick="event.preventDefault(); openImageModal(this.src)" title="도면 보기">
                        </div>
                        <input type="number" inputmode="decimal" id="stroke" class="w-full border-gray-300 border rounded-lg p-3 focus:ring-2 focus:ring-red-500 focus:border-red-500 outline-none shadow-sm transition-all">
                    </div>

                    <div class="input-group">
                        <div class="flex items-center mb-1 justify-between">
                            <label class="text-sm font-medium text-gray-700">이동 속도 (m/s)</label>
                            <img src="https://tsubaki-kabelschlepp.com/typo3conf/ext/tkg17/Resources/Public/Images/Pictographs/picto_travel-velocity.svg" class="thumb-icon" onclick="event.preventDefault(); openImageModal(this.src)" title="도면 보기">
                        </div>
                        <input type="number" inputmode="decimal" step="0.1" id="speed" class="w-full border-gray-300 border rounded-lg p-3 focus:ring-2 focus:ring-red-500 focus:border-red-500 outline-none shadow-sm transition-all">
                    </div>

                    <div class="input-group">
                        <label class="block text-sm font-medium text-gray-700 mb-1">링크 수 (Links)</label>
                        <input type="number" inputmode="numeric" id="linkCount" class="w-full border-gray-300 border rounded-lg p-3 focus:ring-2 focus:ring-red-500 focus:border-red-500 outline-none shadow-sm transition-all" placeholder="예: 50">
                    </div>

                    <div class="input-group">
                        <div class="flex items-center mb-1 justify-between">
                            <label class="text-sm font-medium text-gray-700">체인 길이 (브라켓 제외) (mm)</label>
                            <img src="https://onlineengineer.de/img/bloecke_info/info_lk.png" class="thumb-icon" onclick="event.preventDefault(); openImageModal(this.src)" title="도면 보기">
                        </div>
                        <input type="number" inputmode="decimal" id="chainLength" class="w-full border-gray-300 border rounded-lg p-3 focus:ring-2 focus:ring-red-500 focus:border-red-500 outline-none shadow-sm transition-all">
                    </div>

                    <div class="input-group md:col-span-2">
                         <label class="block text-sm font-medium text-gray-700 mb-2">설치 환경 및 재질</label>
                         <div class="bg-white p-4 rounded-lg border border-gray-200 grid grid-cols-1 gap-3">
                            <label class="flex items-center p-2 active:bg-gray-50 rounded cursor-pointer">
                                <input type="checkbox" id="env_chip" class="text-red-600 focus:ring-red-500 h-6 w-6">
                                <span class="ml-3 text-gray-700">금속 칩(Chip) 발생</span>
                            </label>
                            <label class="flex items-center p-2 active:bg-gray-50 rounded cursor-pointer">
                                <input type="checkbox" id="env_high_temp" class="text-red-600 focus:ring-red-500 h-6 w-6">
                                <span class="ml-3 text-gray-700">고온 환경 (60도 이상)</span>
                            </label>
                            <label class="flex items-center p-2 active:bg-gray-50 rounded cursor-pointer">
                                <input type="checkbox" id="mat_sus" class="text-red-600 focus:ring-red-500 h-6 w-6">
                                <span class="ml-3 text-gray-700">스테인리스(STS) 재질 필요</span>
                            </label>
                            <label class="flex items-center p-2 active:bg-gray-50 rounded cursor-pointer">
                                <input type="checkbox" id="supp_gliding" class="text-red-600 focus:ring-red-500 h-6 w-6">
                                <span class="ml-3 text-gray-700">글라이딩(Gliding) 적용</span>
                            </label>
                         </div>
                    </div>
                </div>
            </section>

            <!-- 4. 케이블 및 호스 사양 -->
            <section>
                <h2 class="text-lg md:text-xl font-bold text-gray-800 section-header">4. 케이블 / 호스 사양</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6">
                    <div class="input-group">
                        <div class="flex items-center mb-1 justify-between">
                            <label class="text-sm font-medium text-gray-700">케이블 총 중량 (kg/m)</label>
                            <img src="https://tsubaki-kabelschlepp.com/typo3conf/ext/tkg17/Resources/Public/Images/Pictographs/picto_additional-load.svg" class="thumb-icon" onclick="event.preventDefault(); openImageModal(this.src)" title="도면 보기">
                        </div>
                        <input type="number" inputmode="decimal" step="0.1" id="cableTotalWeight" class="w-full border-gray-300 border rounded-lg p-3 focus:ring-2 focus:ring-red-500 focus:border-red-500 outline-none shadow-sm transition-all">
                    </div>
                    <div class="input-group">
                        <div class="flex items-center mb-1 justify-between">
                            <label class="text-sm font-medium text-gray-700">호스 총 중량 (kg/m)</label>
                            <img src="https://tsubaki-kabelschlepp.com/typo3conf/ext/tkg17/Resources/Public/Images/Pictographs/picto_additional-load.svg" class="thumb-icon" onclick="event.preventDefault(); openImageModal(this.src)" title="도면 보기">
                        </div>
                        <input type="number" inputmode="decimal" step="0.1" id="hoseTotalWeight" class="w-full border-gray-300 border rounded-lg p-3 focus:ring-2 focus:ring-red-500 focus:border-red-500 outline-none shadow-sm transition-all">
                    </div>
                    <div class="input-group">
                        <label class="block text-sm font-medium text-gray-700 mb-1">케이블 외경 (mm)</label>
                        <input type="text" id="cableDiameters" class="w-full border-gray-300 border rounded-lg p-3 focus:ring-2 focus:ring-red-500 focus:border-red-500 outline-none shadow-sm transition-all" placeholder="예: 10, 12, 15 (쉼표 구분)">
                    </div>
                    <div class="input-group">
                        <label class="block text-sm font-medium text-gray-700 mb-1">호스 외경 (mm)</label>
                        <input type="text" id="hoseDiameters" class="w-full border-gray-300 border rounded-lg p-3 focus:ring-2 focus:ring-red-500 focus:border-red-500 outline-none shadow-sm transition-all" placeholder="예: 20, 25 (쉼표 구분)">
                    </div>
                </div>
            </section>

            <!-- 5. 구조 및 옵션 -->
            <section>
                <h2 class="text-lg md:text-xl font-bold text-gray-800 section-header">5. 구조 및 옵션</h2>
                <div class="space-y-6">
                    
                    <!-- 크로스바 선택 -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">크로스바 (Stay) 종류</label>
                        <div class="grid grid-cols-1 gap-3 mb-4">
                            <label class="flex items-center bg-white p-3 border rounded-lg active:bg-gray-50 cursor-pointer shadow-sm">
                                <input type="radio" name="crossbarType" value="RS (얇은 크로스바)" class="text-red-600 focus:ring-red-500 h-6 w-6 flex-shrink-0">
                                <img src="https://tsubaki-kabelschlepp.com/uploads/_processed_/a/b/csm_s_sx1250-rs-2_stay-variants_5f38df9e16.png" class="thumb-icon stay-thumb ml-3 flex-shrink-0" onclick="event.preventDefault(); openImageModal(this.src)" title="클릭하여 확대">
                                <span class="ml-3 text-sm text-gray-700">RS (얇은 크로스바)</span>
                            </label>
                            <label class="flex items-center bg-white p-3 border rounded-lg active:bg-gray-50 cursor-pointer shadow-sm">
                                <input type="radio" name="crossbarType" value="RM (넓은 크로스바)" class="text-red-600 focus:ring-red-500 h-6 w-6 flex-shrink-0">
                                <img src="https://tsubaki-kabelschlepp.com/uploads/_processed_/9/1/csm_s_sx1250-rm_stay-variants_503a158e8d.png" class="thumb-icon stay-thumb ml-3 flex-shrink-0" onclick="event.preventDefault(); openImageModal(this.src)" title="클릭하여 확대">
                                <span class="ml-3 text-sm text-gray-700">RM (넓은 크로스바)</span>
                            </label>
                            <label class="flex items-center bg-white p-3 border rounded-lg active:bg-gray-50 cursor-pointer shadow-sm">
                                <input type="radio" name="crossbarType" value="LG (홀 스테이)" class="text-red-600 focus:ring-red-500 h-6 w-6 flex-shrink-0">
                                <img src="https://tsubaki-kabelschlepp.com/uploads/_processed_/d/9/csm_s_sx1250-lg_stay-variants_01_7dc192b5b2.png" class="thumb-icon stay-thumb ml-3 flex-shrink-0" onclick="event.preventDefault(); openImageModal(this.src)" title="클릭하여 확대">
                                <span class="ml-3 text-sm text-gray-700">LG (홀 스테이)</span>
                            </label>
                            <label class="flex items-center bg-white p-3 border rounded-lg active:bg-gray-50 cursor-pointer shadow-sm">
                                <input type="radio" name="crossbarType" value="기타" class="text-red-600 focus:ring-red-500 h-6 w-6 flex-shrink-0">
                                <span class="ml-3 text-sm text-gray-700">기타</span>
                            </label>
                        </div>

                        <!-- LG 홀 스테이 상세 치수 -->
                        <div class="input-group bg-gray-50 p-4 rounded-lg border border-gray-200">
                            <div class="flex items-center mb-1 justify-between">
                                <label class="text-sm font-medium text-gray-700">LG 홀 스테이 가공 치수</label>
                                <img src="https://tsubaki-kabelschlepp.com/uploads/tx_tkg17pim/assets/images/cable-carriers/steel-line/s-sx-series/s-sx1250/s-sx1250-lg/us/s_sx1250_s_sx1250-lg_cross-section.svg" class="thumb-icon" onclick="event.preventDefault(); openImageModal(this.src)" title="도면 보기">
                            </div>
                            <input type="text" id="lgHoleDimensions" class="w-full border-gray-300 border rounded-lg p-3 focus:ring-2 focus:ring-red-500 focus:border-red-500 outline-none shadow-sm transition-all" placeholder="예: 15, 20, 15, 10">
                            <div class="info-box mt-2 text-xs">
                                <strong>이동측(Moving Point)</strong>에서 고정측을 바라볼 때, <strong>좌측부터 우측 순서대로</strong> 기입.
                            </div>
                        </div>
                    </div>

                    <!-- 브라켓 방향 -->
                    <div>
                        <div class="flex items-center mb-2 justify-between">
                            <label class="text-sm font-medium text-gray-700">브라켓 방향</label>
                            <img src="https://onlineengineer.de/img/groups_info/preview/preview_group_info_connection_element.png" class="thumb-icon" onclick="event.preventDefault(); openImageModal(this.src)" title="도면 보기">
                        </div>
                        <div class="bg-white p-4 rounded-lg border border-gray-200 shadow-sm">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div>
                                    <span class="block text-xs font-bold text-gray-500 uppercase mb-3 border-b pb-1">고정측 (Fixed Point)</span>
                                    <div class="flex space-x-6">
                                        <label class="flex items-center cursor-pointer">
                                            <input type="radio" name="fixedBracket" value="FA" class="text-red-600 focus:ring-red-500 h-5 w-5">
                                            <span class="ml-2 text-sm text-gray-700">FA (외측)</span>
                                        </label>
                                        <label class="flex items-center cursor-pointer">
                                            <input type="radio" name="fixedBracket" value="FI" class="text-red-600 focus:ring-red-500 h-5 w-5">
                                            <span class="ml-2 text-sm text-gray-700">FI (내측)</span>
                                        </label>
                                    </div>
                                </div>
                                <div>
                                    <span class="block text-xs font-bold text-gray-500 uppercase mb-3 border-b pb-1">이동측 (Moving Point)</span>
                                    <div class="flex space-x-6">
                                        <label class="flex items-center cursor-pointer">
                                            <input type="radio" name="movingBracket" value="MA" class="text-red-600 focus:ring-red-500 h-5 w-5">
                                            <span class="ml-2 text-sm text-gray-700">MA (외측)</span>
                                        </label>
                                        <label class="flex items-center cursor-pointer">
                                            <input type="radio" name="movingBracket" value="MI" class="text-red-600 focus:ring-red-500 h-5 w-5">
                                            <span class="ml-2 text-sm text-gray-700">MI (내측)</span>
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">커버 밀폐 여부</label>
                        <div class="flex items-center space-x-6 bg-white p-4 rounded-lg border border-gray-200 shadow-sm">
                            <label class="flex items-center cursor-pointer">
                                <input type="radio" name="coverType" value="오픈형" checked class="text-red-600 focus:ring-red-500 h-6 w-6">
                                <span class="ml-3 text-gray-700">오픈형 (일반)</span>
                            </label>
                            <label class="flex items-center cursor-pointer">
                                <input type="radio" name="coverType" value="밀폐형" class="text-red-600 focus:ring-red-500 h-6 w-6">
                                <img src="https://tsubaki-kabelschlepp.com/uploads/_processed_/8/2/csm_s_sx-series_s_sx-tubes_b74b99c51f.png" class="thumb-icon stay-thumb ml-2" onclick="event.preventDefault(); openImageModal(this.src)" title="클릭하여 확대">
                                <span class="ml-2 text-gray-700">밀폐형 (튜브)</span>
                            </label>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 메모 -->
            <section>
                <label class="block text-sm font-medium text-gray-700 mb-1">기타 특이사항 메모</label>
                <textarea id="memo" rows="4" class="w-full border-gray-300 border rounded-lg p-3 focus:ring-2 focus:ring-red-500 focus:border-red-500 outline-none shadow-sm transition-all" placeholder="예: 3일 내 긴급 교체 필요 등"></textarea>
            </section>

        </form>

        <!-- Footer / Actions (Un-Fixed, Natural Flow) -->
        <div class="bg-gray-800 p-4 md:p-6 border-t border-gray-700 safe-area-bottom no-print">
            <div class="max-w-4xl mx-auto flex flex-col space-y-3">
                <div class="flex space-x-3">
                    <button onclick="saveToLocal()" class="flex-1 bg-gray-600 active:bg-gray-500 text-white font-bold py-3 rounded-lg shadow transition text-sm">
                        임시 저장
                    </button>
                    <button onclick="loadFromLocal()" class="flex-1 bg-green-700 active:bg-green-600 text-white font-bold py-3 rounded-lg shadow transition text-sm">
                        불러오기
                    </button>
                </div>
                
                <div class="flex space-x-3">
                    <button onclick="sendEmail()" class="flex-1 bg-indigo-700 active:bg-indigo-600 text-white font-bold py-3 rounded-lg shadow transition text-sm">
                        이메일 전송
                    </button>
                    <button onclick="copyToClipboard()" class="flex-1 bg-blue-700 active:bg-blue-600 text-white font-bold py-3 rounded-lg shadow transition text-sm">
                        텍스트 복사
                    </button>
                </div>
                <button onclick="window.print()" class="w-full bg-gray-700 active:bg-gray-600 text-gray-200 font-bold py-2 rounded-lg shadow transition text-xs">
                    PDF 저장 / 인쇄
                </button>
            </div>
        </div>
    </div>

    <!-- Notification Toast -->
    <div id="toast" class="fixed top-20 left-1/2 transform -translate-x-1/2 bg-gray-900 text-white px-6 py-3 rounded-full shadow-2xl translate-y-[-150%] opacity-0 transition-all duration-300 z-50 text-sm font-bold flex items-center border border-gray-700">
        <span id="toastMessage">📋 클립보드에 복사되었습니다.</span>
    </div>

    <!-- Mobile-Optimized Image Modal -->
    <div id="imageModal" class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-90 hidden p-4" onclick="closeImageModal()">
        <div class="relative w-full max-w-lg bg-white rounded-lg overflow-hidden shadow-2xl" onclick="event.stopPropagation()">
            <!-- Modal Header -->
            <div class="bg-gray-100 px-4 py-3 flex justify-between items-center border-b">
                <h3 class="font-bold text-gray-700">상세 이미지</h3>
                <button onclick="closeImageModal()" class="text-gray-500 hover:text-red-600 p-2 focus:outline-none">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>
            <!-- Image Content -->
            <div class="p-2 bg-white flex justify-center items-center min-h-[200px]">
                <img id="modalImage" src="" alt="Detail View" class="max-w-full max-h-[70vh] object-contain">
            </div>
        </div>
    </div>

    <script>
        // ... existing script functions ...
        function generateReportText() {
            const getValue = (id) => document.getElementById(id).value || '미기입';
            const getChecked = (id) => document.getElementById(id).checked ? '예' : '아니오';
            const getRadio = (name) => {
                const checked = document.querySelector(`input[name="${name}"]:checked`);
                return checked ? checked.value : '미선택';
            };

            const date = getValue('checkDate');
            const machine = getValue('machineName');
            const inspector = getValue('inspector');

            const bi = getValue('bi');
            const ba = getValue('ba');
            const hi = getValue('hi');
            const ha = getValue('ha');
            const kr = getValue('kr');
            const totalHeight = getValue('totalHeight');
            const pitch = getValue('pitch');
            const stayArrangement = getRadio('stayArrangement'); 

            const stroke = getValue('stroke');
            const speed = getValue('speed');
            const linkCount = getValue('linkCount');
            const chainLength = getValue('chainLength');
            
            const env_chip = getChecked('env_chip');
            const env_temp = getChecked('env_high_temp');
            const mat_sus = getChecked('mat_sus');
            const supp_gliding = getChecked('supp_gliding');

            const cableTotalWeight = getValue('cableTotalWeight');
            const hoseTotalWeight = getValue('hoseTotalWeight');
            const cableDiameters = getValue('cableDiameters');
            const hoseDiameters = getValue('hoseDiameters');

            const crossbarType = getRadio('crossbarType');
            const lgHoleSpecs = getValue('lgHoleDimensions');
            const fixedBracket = getRadio('fixedBracket');
            const movingBracket = getRadio('movingBracket');
            const coverType = getRadio('coverType');
            const memo = getValue('memo');

            return `[KABELSCHLEPP Drag Chain 체크리스트]

1. 기본 정보
- 점검 일자: ${date}
- 설비명: ${machine}
- 담당자: ${inspector}

2. 치수 정보
- 내폭(Bi): ${bi} mm
- 외폭(Ba): ${ba} mm
- 내측 높이(hi): ${hi} mm
- 외측 높이(ha): ${ha} mm
- 곡률 반경(KR): ${kr} mm
- 전체 높이(H): ${totalHeight} mm
- 피치(P): ${pitch} mm
- 크로스바 배열: ${stayArrangement}

3. 운전 조건
- 이동 거리(Stroke): ${stroke} mm
- 이동 속도: ${speed} m/s
- 링크 수: ${linkCount} EA
- 체인 길이(브라켓 제외): ${chainLength} mm
- 칩(Chip) 발생 환경: ${env_chip}
- 고온 환경: ${env_temp}
- STS 재질 필요: ${mat_sus}
- 글라이딩 적용: ${supp_gliding}

4. 케이블/호스 사양
- 케이블 총 중량: ${cableTotalWeight} kg/m
- 호스 총 중량: ${hoseTotalWeight} kg/m
- 케이블 외경 목록: ${cableDiameters}
- 호스 외경 목록: ${hoseDiameters}

5. 구조 및 옵션
- 크로스바 종류: ${crossbarType}
- LG 홀 가공 치수: ${lgHoleSpecs}
- 고정측 브라켓: ${fixedBracket}
- 이동측 브라켓: ${movingBracket}
- 커버 형태: ${coverType}

6. 기타 메모
${memo}`;
        }

        function copyToClipboard() {
            const reportText = generateReportText();
            const textarea = document.createElement('textarea');
            textarea.value = reportText;
            document.body.appendChild(textarea);
            textarea.select();
            textarea.setSelectionRange(0, 99999); // 모바일 지원
            
            try {
                document.execCommand('copy');
                showToast('📋 클립보드에 복사되었습니다.');
            } catch (err) {
                console.error('복사 실패', err);
                alert('복사에 실패했습니다. 수동으로 텍스트를 복사해주십시오.');
            }
            document.body.removeChild(textarea);
        }

        function sendEmail() {
            const reportText = generateReportText();
            const recipient = "kskoreaco@gmail.com";
            const subject = encodeURIComponent("[KABELSCHLEPP] Drag Chain 현장 체크리스트");
            const body = encodeURIComponent(reportText);
            window.location.href = `mailto:${recipient}?subject=${subject}&body=${body}`;
        }

        function resetForm() {
            if (confirm("정말로 모든 입력 내용을 초기화하시겠습니까?")) {
                document.getElementById('checklistForm').reset();
                document.getElementById('checkDate').valueAsDate = new Date();
                showToast('🔄 입력 내용이 초기화되었습니다.');
            }
        }

        function showToast(message) {
            const toast = document.getElementById('toast');
            const msgSpan = document.getElementById('toastMessage');
            msgSpan.innerText = message;
            
            toast.classList.remove('translate-y-[-150%]', 'opacity-0');
            toast.classList.add('translate-y-0', 'opacity-100');
            setTimeout(() => {
                toast.classList.remove('translate-y-0', 'opacity-100');
                toast.classList.add('translate-y-[-150%]', 'opacity-0');
            }, 3000);
        }

        // Image Modal Logic - improved for mobile
        function openImageModal(url) {
            const modal = document.getElementById('imageModal');
            const img = document.getElementById('modalImage');
            img.src = url;
            modal.classList.remove('hidden');
        }

        function closeImageModal() {
            const modal = document.getElementById('imageModal');
            modal.classList.add('hidden');
        }

        // Local Storage Logic
        function saveToLocal() {
            const inputs = document.querySelectorAll('input, select, textarea');
            const data = {};
            
            inputs.forEach(el => {
                 if (el.type === 'radio') {
                     if (el.checked) data[el.name] = el.value;
                 } else if (el.type === 'checkbox') {
                     data[el.id] = el.checked;
                 } else if (el.id) {
                     data[el.id] = el.value;
                 }
            });
            
            try {
                localStorage.setItem('kabelschlepp_checklist_data', JSON.stringify(data));
                showToast('💾 기기에 임시 저장되었습니다.');
            } catch (e) {
                alert('저장에 실패했습니다. (브라우저 저장소 오류)');
            }
        }

        function loadFromLocal() {
            const savedData = localStorage.getItem('kabelschlepp_checklist_data');
            if (!savedData) {
                alert('저장된 데이터가 없습니다.');
                return;
            }

            const data = JSON.parse(savedData);
            
            for (const [key, value] of Object.entries(data)) {
                const el = document.getElementById(key);
                if (el) {
                    if (el.type === 'checkbox') {
                        el.checked = value;
                    } else if (el.type !== 'radio') {
                        el.value = value;
                    }
                }
            }
            
            const radioGroups = ['stayArrangement', 'crossbarType', 'fixedBracket', 'movingBracket', 'coverType'];
            radioGroups.forEach(name => {
                if (data[name]) {
                    const radios = document.getElementsByName(name);
                    radios.forEach(r => {
                        if (r.value === data[name]) r.checked = true;
                    });
                }
            });

            showToast('📂 저장된 데이터를 불러왔습니다.');
        }

        document.getElementById('checkDate').valueAsDate = new Date();
        // Update print date when printing
        window.addEventListener('beforeprint', () => {
            const now = new Date();
            document.getElementById('printDate').innerText = now.toLocaleDateString() + " " + now.toLocaleTimeString();
        });
    </script>
</body>
</html>